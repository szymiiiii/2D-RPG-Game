[gd_scene load_steps=24 format=4 uid="uid://djb81kyscsj4r"]

[ext_resource type="PackedScene" uid="uid://dba6tbl6tl0go" path="res://scenes/player.tscn" id="1_5objd"]
[ext_resource type="Script" uid="uid://dr58n2ogba4m4" path="res://scenes/Maps/supermarket.gd" id="1_hfvu4"]
[ext_resource type="Texture2D" uid="uid://mdpduyirdchh" path="res://assets/Supermarket.png" id="1_v1cbd"]
[ext_resource type="PackedScene" uid="uid://b5ljrwmuctd3u" path="res://scenes/props/doors.tscn" id="3_lkxme"]
[ext_resource type="PackedScene" uid="uid://mn411bco744v" path="res://scenes/NPCs/Ania.tscn" id="3_r0a8f"]
[ext_resource type="PackedScene" uid="uid://b2n0tg5kyc6i0" path="res://scenes/NPCs/StoreManager.tscn" id="4_r0a8f"]
[ext_resource type="PackedScene" uid="uid://bvmqjptcybqc0" path="res://scenes/props/player_body_camera.tscn" id="4_xj4b4"]
[ext_resource type="PackedScene" uid="uid://cmxvf8myyfhsa" path="res://scenes/UI/actionable.tscn" id="5_l5eal"]
[ext_resource type="Resource" uid="uid://cfdtr7gf15ajd" path="res://dialogue/StoreManager.dialogue" id="6_r0a8f"]
[ext_resource type="PackedScene" uid="uid://cs6f1jo7jg1c3" path="res://scripts/Enemies/basic_enemy.tscn" id="8_l5eal"]
[ext_resource type="Script" uid="uid://cvolbto0km40l" path="res://scenes/Maps/task_finished.gd" id="9_i5hnb"]
[ext_resource type="Texture2D" uid="uid://dolmqphjeptax" path="res://assets/Items/Drop.png" id="9_pipff"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_lkxme"]
texture = ExtResource("1_v1cbd")
5:6/size_in_atlas = Vector2i(4, 3)
5:6/0 = 0
5:9/size_in_atlas = Vector2i(4, 3)
5:9/0 = 0
9:0/size_in_atlas = Vector2i(8, 4)
9:0/0 = 0
9:4/size_in_atlas = Vector2i(8, 4)
9:4/0 = 0
9:8/size_in_atlas = Vector2i(8, 4)
9:8/0 = 0
8:13/size_in_atlas = Vector2i(4, 3)
8:13/0 = 0
14:13/size_in_atlas = Vector2i(3, 2)
14:13/0 = 0

[sub_resource type="TileSet" id="TileSet_xj4b4"]
sources/0 = SubResource("TileSetAtlasSource_lkxme")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_3j0fj"]
texture = ExtResource("1_v1cbd")
9:4/size_in_atlas = Vector2i(8, 4)
9:4/0 = 0
9:0/size_in_atlas = Vector2i(8, 4)
9:0/0 = 0
9:8/size_in_atlas = Vector2i(8, 4)
9:8/0 = 0
14:13/size_in_atlas = Vector2i(3, 3)
14:13/0 = 0
12:12/0 = 0
12:12/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -1.8795242, 1.9289856, -2.0773697, 2.0279083, 8, -2.1268291, 8, -2.1268291, 1.978445, -8, 1.8795223)
13:12/0 = 0
13:12/0/physics_layer_0/polygon_0/points = PackedVector2Array(-1.7311401, -1.6816788, 8, -1.8795242, 8, 1.7806015, 2.1268291, 2.0773678, 1.7311401, 8, -1.5332947, 8)
14:12/0 = 0
14:12/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -1.8795242, 8, -1.8795242, 8, 1.7806015, -8, 1.8795223)
12:13/0 = 0
12:13/0/physics_layer_0/polygon_0/points = PackedVector2Array(-1.7311401, -8, 1.9289856, -8, 2.3246746, 8, -2.0279064, 8)
12:14/size_in_atlas = Vector2i(1, 3)
12:14/0 = 0
12:14/0/physics_layer_0/polygon_0/points = PackedVector2Array(-1.8400917, -25.235558, 1.4896011, -24.184074, 1.8400955, 24.184074, -1.8400917, 23.658333)

[sub_resource type="TileSet" id="TileSet_7x8vj"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_3j0fj")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i5hnb"]
size = Vector2(51, 56)

[sub_resource type="Animation" id="Animation_4qbi3"]
length = 0.001

[sub_resource type="Animation" id="Animation_nh26r"]
resource_name = "spin"
loop_mode = 1
step = 5.0

[sub_resource type="AnimationLibrary" id="AnimationLibrary_20sv2"]
_data = {
&"RESET": SubResource("Animation_4qbi3"),
&"spin": SubResource("Animation_nh26r")
}

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pipff"]
size = Vector2(82.50012, 140.00003)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_4nm03"]
texture = ExtResource("1_v1cbd")
8:13/size_in_atlas = Vector2i(4, 3)
8:13/0 = 0
8:13/0/physics_layer_0/polygon_0/points = PackedVector2Array(-30.230093, -24.359322, 30.230099, -23.833582, 30.405346, 18.926666, -30.230093, 20.503891)

[sub_resource type="TileSet" id="TileSet_r0a8f"]
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_4nm03")

[node name="Supermarket" type="Node2D"]
script = ExtResource("1_hfvu4")

[node name="Doors" parent="." instance=ExtResource("3_lkxme")]
position = Vector2(49, -31)
orientation = 1
next_scene = 8
id = 4

[node name="Background" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAGAP//AAAFAAkAAAAGAP7/AAAFAAkAAAAGAP3/AAAFAAkAAAAGAPz/AAAFAAkAAAAGAPv/AAAFAAkAAAAGAPr/AAAFAAkAAAAGAPn/AAAFAAkAAAAJAP//AAAFAAkAAAAKAP//AAAFAAkAAAALAP//AAAFAAkAAAAMAP//AAAFAAkAAAANAP//AAAFAAkAAAAOAP//AAAFAAkAAAAPAP//AAAFAAkAAAAQAP//AAAFAAkAAAARAP//AAAFAAkAAAASAP//AAAFAAkAAAATAP//AAAFAAkAAAAUAP//AAAFAAkAAAAVAP//AAAFAAkAAAAWAP//AAAFAAkAAAAXAP//AAAFAAkAAAAYAP//AAAFAAkAAAAZAP//AAAFAAkAAAAaAP//AAAFAAkAAAAbAP//AAAFAAkAAAAcAP//AAAFAAkAAAAdAP//AAAFAAkAAAAeAP//AAAFAAkAAAAfAP//AAAFAAkAAAAgAP//AAAFAAkAAAAhAP//AAAFAAkAAAAJAP3/AAAFAAkAAAAKAP3/AAAFAAkAAAALAP3/AAAFAAkAAAAMAP3/AAAFAAkAAAANAP3/AAAFAAkAAAAOAP3/AAAFAAkAAAAPAP3/AAAFAAkAAAAQAP3/AAAFAAkAAAARAP3/AAAFAAkAAAASAP3/AAAFAAkAAAATAP3/AAAFAAkAAAAUAP3/AAAFAAkAAAAVAP3/AAAFAAkAAAAWAP3/AAAFAAkAAAAXAP3/AAAFAAkAAAAYAP3/AAAFAAkAAAAZAP3/AAAFAAkAAAAaAP3/AAAFAAkAAAAbAP3/AAAFAAkAAAAcAP3/AAAFAAkAAAAdAP3/AAAFAAkAAAAeAP3/AAAFAAkAAAAfAP3/AAAFAAkAAAAJAPv/AAAFAAkAAAAKAPv/AAAFAAkAAAALAPv/AAAFAAkAAAAMAPv/AAAFAAkAAAANAPv/AAAFAAkAAAAOAPv/AAAFAAkAAAAPAPv/AAAFAAkAAAAQAPv/AAAFAAkAAAARAPv/AAAFAAkAAAASAPv/AAAFAAkAAAATAPv/AAAFAAkAAAAUAPv/AAAFAAkAAAAVAPv/AAAFAAkAAAAWAPv/AAAFAAkAAAAXAPv/AAAFAAkAAAAYAPv/AAAFAAkAAAAZAPv/AAAFAAkAAAAaAPv/AAAFAAkAAAAbAPv/AAAFAAkAAAAcAPv/AAAFAAkAAAAdAPv/AAAFAAkAAAAeAPv/AAAFAAkAAAAfAPv/AAAFAAkAAAAgAPv/AAAFAAkAAAAJAPn/AAAFAAkAAAAKAPn/AAAFAAkAAAALAPn/AAAFAAkAAAAMAPn/AAAFAAkAAAANAPn/AAAFAAkAAAAOAPn/AAAFAAkAAAAPAPn/AAAFAAkAAAAQAPn/AAAFAAkAAAARAPn/AAAFAAkAAAASAPn/AAAFAAkAAAATAPn/AAAFAAkAAAAUAPn/AAAFAAkAAAAVAPn/AAAFAAkAAAAWAPn/AAAFAAkAAAAXAPn/AAAFAAkAAAAYAPn/AAAFAAkAAAAZAPn/AAAFAAkAAAAaAPn/AAAFAAkAAAAbAPn/AAAFAAkAAAAcAPn/AAAFAAkAAAAdAPn/AAAFAAkAAAAeAPn/AAAFAAkAAAAfAPn/AAAFAAkAAAAhAP3/AAAFAAkAAAAhAPv/AAAFAAkAAAAhAPn/AAAFAAkAAAAkAPn/AAAFAAkAAAAkAPr/AAAFAAkAAAAkAPv/AAAFAAkAAAAkAPz/AAAFAAkAAAAkAP3/AAAFAAkAAAAkAP7/AAAFAAkAAAAnAPn/AAAFAAkAAAAnAPr/AAAFAAkAAAAnAPv/AAAFAAkAAAAnAPz/AAAFAAkAAAAnAP3/AAAFAAkAAAAnAP7/AAAFAAkAAAAqAP7/AAAFAAYAAAAqAP3/AAAFAAYAAAAqAPz/AAAFAAYAAAAqAPv/AAAFAAYAAAAqAPr/AAAFAAYAAAAqAPn/AAAFAAYAAAAAAP//AAAFAAYAAAAAAP7/AAAFAAYAAAAAAP3/AAAFAAYAAAAAAPz/AAAFAAYAAAAAAPv/AAAFAAYAAAAAAPr/AAAFAAYAAAAAAPn/AAAFAAYAAAAAAPj/AAAFAAYAAAAEAP//AAAFAAkAAAAEAP7/AAAFAAkAAAAEAP3/AAAFAAkAAAAEAPz/AAAFAAkAAAAEAPv/AAAFAAkAAAAEAPr/AAAFAAkAAAAEAPn/AAAFAAkAAAA=")
tile_set = SubResource("TileSet_xj4b4")

[node name="Things" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAFAP//AAAOAA0AAAALAP7/AAAJAAgAAAATAP7/AAAJAAgAAAAbAP7/AAAJAAQAAAAjAP7/AAAJAAAAAAACAP7/AAAMAA4AAAACAPz/AAAMAA0AAAACAPv/AAAMAA0AAAACAPr/AAAMAA0AAAACAPn/AAAMAA0AAAACAPj/AAANAAwAAAADAPj/AAAOAAwAAAAEAPj/AAAOAAwAAAAFAPj/AAAOAAwAAAAGAPj/AAAOAAwAAAAHAPj/AAAOAAwAAAAIAPj/AAAOAAwAAAAJAPj/AAAOAAwAAAAKAPj/AAAOAAwAAAALAPj/AAAOAAwAAAAMAPj/AAAOAAwAAAANAPj/AAAOAAwAAAAOAPj/AAAOAAwAAAAPAPj/AAAOAAwAAAAQAPj/AAAOAAwAAAARAPj/AAAOAAwAAAASAPj/AAAOAAwAAAATAPj/AAAOAAwAAAAUAPj/AAAOAAwAAAAVAPj/AAAOAAwAAAAWAPj/AAAOAAwAAAAXAPj/AAAOAAwAAAAYAPj/AAAOAAwAAAAZAPj/AAAOAAwAAAAaAPj/AAAOAAwAAAAbAPj/AAAOAAwAAAAcAPj/AAAOAAwAAAAdAPj/AAAOAAwAAAAeAPj/AAAOAAwAAAAfAPj/AAAOAAwAAAAgAPj/AAAOAAwAAAAhAPj/AAAOAAwAAAAiAPj/AAAOAAwAAAAjAPj/AAAOAAwAAAAkAPj/AAAOAAwAAAAlAPj/AAAOAAwAAAAmAPj/AAAOAAwAAAAnAPj/AAAOAAwAAAAoAPj/AAAMAAwAAAAoAPn/AAAMAA0AAAAoAPr/AAAMAA0AAAAoAPv/AAAMAA0AAAAoAPz/AAAMAA0AAAAoAP3/AAAMAA0AAAAoAP7/AAAMAA0AAAAoAP//AAAMAA0AAAA=")
tile_set = SubResource("TileSet_7x8vj")

[node name="WithFriends" type="Node2D" parent="."]

[node name="Ania" parent="WithFriends" instance=ExtResource("3_r0a8f")]
position = Vector2(219, -14)

[node name="StoreManager" parent="WithFriends" instance=ExtResource("4_r0a8f")]
position = Vector2(184, -13)

[node name="StoreMangerWithFriends" parent="WithFriends/StoreManager" instance=ExtResource("5_l5eal")]
position = Vector2(1, -1)
dialogue_resource = ExtResource("6_r0a8f")
dialogue_start = "introduction_with_friend"
automatic_interaction = true
can_be_completed = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="WithFriends/StoreManager/StoreMangerWithFriends"]
position = Vector2(-8, -14)
shape = SubResource("RectangleShape2D_i5hnb")

[node name="Friendless" type="Node2D" parent="."]
position = Vector2(264, -17)

[node name="SuperMarketBoss" parent="Friendless" instance=ExtResource("8_l5eal")]
position = Vector2(201, -9.999996)
scale = Vector2(0.4, 0.4)
dialogue_resource = ExtResource("6_r0a8f")
dialogue_start = "introduction_without_friend"
boss_type = 0

[node name="BadFeelingSupermarket" parent="Friendless" instance=ExtResource("5_l5eal")]
position = Vector2(32, -2)
dialogue_resource = ExtResource("6_r0a8f")
dialogue_start = "bad_feeling"
automatic_interaction = true
can_be_completed = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Friendless/BadFeelingSupermarket"]
position = Vector2(0, -10)
shape = SubResource("RectangleShape2D_i5hnb")

[node name="TaskFinished" type="Node2D" parent="."]
position = Vector2(465, -26.999996)
scale = Vector2(0.4, 0.4)
script = ExtResource("9_i5hnb")

[node name="Sprite2D" type="Sprite2D" parent="TaskFinished"]
position = Vector2(356.49988, 8.999996)
scale = Vector2(0.99999994, 0.99999994)
texture = ExtResource("9_pipff")

[node name="AnimationPlayer" type="AnimationPlayer" parent="TaskFinished"]
root_node = NodePath("../../Friendless/SuperMarketBoss")
libraries = {
&"": SubResource("AnimationLibrary_20sv2")
}
autoplay = "spin"

[node name="GotPrinterInk" parent="TaskFinished" instance=ExtResource("5_l5eal")]
position = Vector2(357.5, 12.499988)
dialogue_resource = ExtResource("6_r0a8f")
dialogue_start = "got_printer_ink"
automatic_interaction = true
can_be_completed = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="TaskFinished/GotPrinterInk"]
position = Vector2(1.25, -15.000004)
scale = Vector2(0.99999964, 0.99999964)
shape = SubResource("RectangleShape2D_pipff")

[node name="Player" parent="." instance=ExtResource("1_5objd")]
position = Vector2(370, 1)
is_jumping_allowed = false

[node name="PlayerBodyCamera" parent="Player" instance=ExtResource("4_xj4b4")]
position = Vector2(0, -40)

[node name="Foreground" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAADAAEAAAAIAA0AAAAEAAEAAAAIAA0AAAAFAAEAAAAIAA0AAAAGAAEAAAAIAA0AAAAHAAEAAAAIAA0AAAAIAAEAAAAIAA0AAAAJAAEAAAAIAA0AAAAKAAEAAAAIAA0AAAALAAEAAAAIAA0AAAAMAAEAAAAIAA0AAAANAAEAAAAIAA0AAAAOAAEAAAAIAA0AAAAPAAEAAAAIAA0AAAAQAAEAAAAIAA0AAAARAAEAAAAIAA0AAAASAAEAAAAIAA0AAAATAAEAAAAIAA0AAAAUAAEAAAAIAA0AAAAVAAEAAAAIAA0AAAAWAAEAAAAIAA0AAAAXAAEAAAAIAA0AAAAYAAEAAAAIAA0AAAAZAAEAAAAIAA0AAAAaAAEAAAAIAA0AAAAbAAEAAAAIAA0AAAAcAAEAAAAIAA0AAAAdAAEAAAAIAA0AAAAeAAEAAAAIAA0AAAAfAAEAAAAIAA0AAAAgAAEAAAAIAA0AAAAhAAEAAAAIAA0AAAAkAAEAAAAIAA0AAAAlAAEAAAAIAA0AAAAmAAEAAAAIAA0AAAAnAAEAAAAIAA0AAAAoAAEAAAAIAA0AAAA=")
tile_set = SubResource("TileSet_r0a8f")
